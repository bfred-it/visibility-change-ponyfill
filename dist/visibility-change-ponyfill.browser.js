var onVisibilityChange=function(){"use strict";function e(e,n){var i=e();var r=void 0;return{verify:function t(){r=e();if(r!==i){n(r,i);i=r}}}}var n=[];var i=void 0;function r(){return document.hidden}var t=e(r,function(){n.forEach(setTimeout)});function v(){if(!i){i=setInterval(t.verify,333)}}function f(){if(!n.length){i=clearInterval(i)}}function o(i){var t=e(r,i);document.addEventListener("visibilitychange",t.verify);n.push(t.verify);v();var o=function u(e){document.removeEventListener("visibilitychange",t.verify);if(!e){n=n.filter(function(e){return e!==t.verify});f()}};t.verify.remove=o;return{remove:o}}o.removeAll=function(){n.forEach(function(e){e.remove(true)});n.length=0;f()};return o}();
